## FHFA's seasonal adjustment model for housing price indices

This proof-of-concept (POC) demonstrates the use of Claude Code (an agentic coding tool from Anthropic: https://www.anthropic.com/claude-code) to develop and train a model, using FHFA's seasonal adjustment model for housing price index white paper: https://www.huduser.gov/portal/periodicals/cityscape/vol24num3/ch4.pdf (saved as 'Applying Seasonal Adjustments to Housing Markets.pdf')

#### Development Process: 
* Step 1 - use a reasoning LLM that's able to ingest the model white paper and generate a Product Requirements Document (PRD). A PRD is a requirements specification in markdown format. We used Google Gemini 2.5 Pro for our reasoning LLM. We could have used either OpenAI's ChatGPT o3 (advanded reasoning) or Claude Opus 4. The file seasonal_adjustment_prd.md stores the PRD generated by Gemini 2.5 Pro.
* Step 2 - feed this PRD to a coding LLM and request it to generate an implementation plan. We use Claude Code (as the client coding tool that uses Claude Opus 4 LLM) to generate this implementation plan. Claude Opus 4 is known to be the most advanded LLM for coding tasks (compared to ChatGPT o4-mini-high and Gemini 2.5 Pro). The file implementation_plan.md stores the implementation plan generated by Clause Code.
* Step 3 - request Claude Code (using Clause Opus 4 LLM) to use the implementation plan implementation_plan.md to: 1) scaffold the project; 2) implement all necessary model code and support code; 3) create both unit tests and integration tests (with > 80% of code coverage), including the generation of sample data used for model training and testing. Claude Code was also instructed to iterate/work until all tests passed. The implementation uses the following tech stack: Python and pandas using statsmodel/scikit-Learn

The implementation took Claude Code about an hour to complete. This includes the successful passing of all unit and integration tests. See impl-pandas/TEST_SUMMARY.md for details.

## Running the code
Refer to impl-pandas/README.md

## All prompts issued to Google Gemini & Claude Code
The following prompt was issue to Google Gemini 2.5 Pro LLM to generate the Product Requirements Document (PRD), after the 'Applying Seasonal Adjustments to Housing Markets.pdf' whitepaper was uploaded to the Gemini app:

> Create a seasonal_adjustment_prd.md file to represent the Product Requirements Document (PRD) using the uploaded whitepaper. Use it to extract the relevant equations, variables, and coefficients as functional requirements in the hpi-seasonal_adjustment_prd.md PRD so I can use this PRD later to generate code using Python & Pandas/Numpy.

The PRD was then downloaded for use in Claude Code to generate the full implementation of the model. For referenace, the complete list of prompts issued to Clause Code is listed below:

> use the @seasonal_adjustment_prd.md file to generate a plan to implement this product requirements document in code

> save this plan as implementation_plan.md file in the current directory so I can user it later

> implement the code using this plan and store all the code for this project under the impl-pandas directory

> implement the last 2 steps to create unit and integration tests. Generate sample data as needed

> Run all unit and integration tests to make sure they all pass. If not, make changes to the code iteratively until all the tests passed. Generate a report summarizing the restuls of all the unit tests and integration tests 

> fix all failed tests

> save the test resutls to @impl-pandas/TEST_SUMMARY.md

> create a README.md file and document in details the following: functional summary of the model/code; how to run/use the model for inference; how to run the all the unit tests and integration tests including setup of scripts, environment variables, etc.


